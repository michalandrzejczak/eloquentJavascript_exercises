<html>
<body style="font-family: calibri">
<ol>
<li><h3>Flattening</h3></li>
<p id="1.1"><code>var arrays = [[1,2,3], [4,5], [6,7,8], [9], [10]];</code></p>
<p id="1.2"></p>
<script language="javascript" type="text/javascript">  
// Flattening //
var arrays = [[1,2,3], [4,5], [6,7,8], [9], [10]];
document.getElementById("1.2").innerHTML = ("Flattened array: " + arrays.reduce(function(a, b) {return a.concat(b);}))
</script>
<li><h3>Mother-child age difference</h3></li>
<p><code>ancestry.js</code> file is needed. <i>Copy/paste in console:</i></p>
<p><blockquote><pre>var ancestry = JSON.parse(ANCESTRY_FILE);
function average(array) {
  function plus(a, b) { return a + b; }
  return array.reduce(plus) / array.length;
}
var byName = {};
ancestry.forEach(function(person) {
  byName[person.name] = person;
});
var knownMother = ancestry.filter(person => byName[person.mother] != null);
var ageDiff = knownMother.map(person => person.born - byName[person.mother].born);
console.log(average(ageDiff));</pre></blockquote></p>
<script language="javascript" type="text/javascript" src="ancestry.js">
// Mother-child age difference //
	// paste in console code from html file //
</script>
<li><h3>Historical life expectancy</h3></li>
<p id ="ageAverage">
<code>ancestry.js</code> file is needed. <i>Copy/paste in console:</i>
<blockquote><pre>var ancestry = JSON.parse(ANCESTRY_FILE);
function average(array) {
  function plus(a, b) { return a + b; }
  return array.reduce(plus) / array.length;
}
function groupBy(array, fnOf) {
  var groups = {};
  array.forEach(function(element) {
    var groupName = fnOf(element);
    if (groupName in groups)
      groups[groupName].push(element);
    else
      groups[groupName] = [element];
  });
  return groups;
}
var sorted = groupBy(ancestry, function(person) {
  return Math.ceil(person.died / 100);
});	
var averageAgeString = "";
for (var century in sorted) {
	var age = sorted[century].map(person => person.died - person.born);
	averageAgeString += "Age average in " + century + " century was: " + average(age) + "&lt;br&gt;";
};
document.getElementById("ageAverage").innerHTML = (averageAgeString);</pre></blockquote>
</p>
<script language="javascript" type="text/javascript" src="ancestry.js">
// Historical life expectancy //
var ancestry = JSON.parse(ANCESTRY_FILE);
function average(array) {
  function plus(a, b) { return a + b; }
  return array.reduce(plus) / array.length;
}
function groupBy(array, fnOf) {
  var groups = {};
  array.forEach(function(element) {
    var groupName = fnOf(element);
    if (groupName in groups)
      groups[groupName].push(element);
    else
      groups[groupName] = [element];
  });
  return groups;
}
var sorted = groupBy(ancestry, function(person) {
  return Math.ceil(person.died / 100);
});	
var averageAgeString = "";
for (var century in sorted) {
	var age = sorted[century].map(person => person.died - person.born);
	averageAgeString += "Age average in " + century + " century was: " + average(age) + "<br>";
};
document.getElementById("ageAverage").innerHTML = (averageAgeString);
</script>
</ol>
<div style="float:right">
<input type="button" value="Refresh Page" onClick="window.location.reload()">
</div>
</body>
</html> 
